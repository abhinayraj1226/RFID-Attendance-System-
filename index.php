<?php require_once("includes/db_connection.php"); ?>
<?php require_once("includes/function.php"); ?>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Home Page</title>
		<link href='https://fonts.googleapis.com/css?family=Roboto:400,300|Sacramento' rel='stylesheet' type='text/css'>
     <link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
   <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css'>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
   
    <script type="text/javascript" src="javascript/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="javascript/jquery.plugin.min.js"></script>
    <script type="text/javascript"  src="javascript/jquery.countdown.min.js"></script>
    <script type="text/javascript">

$(document).ready(function(){
    
    $('.my-countdown').countdown({
        until: $.countdown.UTCDate(
        +5, 2018, 0, 28, 0, 0, 0
        )
    });
})    
        
</script>
</head>
<body>
    <script src='https://soulwire.github.io/sketch.js/js/sketch.min.js'></script>
    
  <section class="container">
  <div class="wrap">
    <div class="pattern"></div>
      
  </div>
</section>
    <div class="ptext">
      <span class="border">
          <div  id="menu-nav">
    <div id="navigation-bar">
                  
    <nav>
    <ul>
      <li style="float: left;"><a href="index.php"><i class="fa fa-home"></i><span>Home</span></a></li>
      <li style="float: right"><a href="register/userregister.php"><i class="fa fa-cogs"></i><span>Register</span></a></li>
        </ul>
        </nav>
</div>   
     </div>
        You 'll Love
      </span>
<div class="hero-buttons">
<div class="button">Attendance</div>
<div class="button">System</div> 
    </div>
        </div>
    
    
  <section class="events events-light">
   
    <div id="world-premiere">
  <div class="heading">
      <h2>Count down to the</h2>
      <h1>Next Exam</h1>
</div>
<div  class="my-countdown">
      
      </div>
    
    </div>
  </section>

  <div class="pimg2">
      
    <div class="ptext">
      <span class="border trans">
          <div  id="menu-nav">
    <div id="navigation-bar">
    <nav>
    <ul>
      <li style="float: left;"><a href="index.php"><i class="fa fa-home"></i><span>Home</span></a></li>
      <li style="float: right"><a href="register/userregister.php"><i class="fa fa-cogs"></i><span>Register</span></a></li>
        </ul>
        </nav>
</div>
    </div>
       
      </span>
    </div>
  </div>
  <section class="section section-dark">
    <h2>About this Project</h2>
    <p>
      This is a unique project in the world of Arduino for marking Online Attendance using Arduino,RC522 and Ethernet shiled. We have developed this unique project to automate the attendance system for colleges, schools and universities etc. using RFID RC522 Module and Arduino. For web support and API you need php and mysql. This project costs less than $100.

The purpose of this project is to remove tedious process of marking attendance manually. We've visited so many sites but no one has the solution for marking online attendance using Ethernet or GSM Module, so I decided to develop our system using these components which reduces our project costing.
    </p>
  </section>

  <div class="pimg3">
    <div id="domino">
  <div class="blocks">
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
    <div class="block">
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
      <div class="wall"></div>
    </div>
  </div>
</div>
  
  </div>

  <section class="section section-dark">
    <h2>How Its Work</h2>
    <p>
       The system can be connected to the computer through RS232 or Universal Serial Bus (USB) port and store the attendance taken inside database (MySQL).To view the recorded attendance, web interface is provided using PHP and HTML.
There are 2 types of RFID Tags. They are Passive RFID Tags and Active Tags.
Here, we are using Passive RFID Tags which contains 8 digit number tags inbuilt in it. RFID reader contains a copper winding in it. This winding acts as an antenna. When a person with RFID tag or transponder enters in the range of RFID reader, the RF field induces voltage in the coils of tag. The range can be set by using the appropriate reader of appropriate frequency. This induced field supplies the voltage in case of passive tags and act as a battery in that case.
Due to interaction of tag with reader 8 characters from tag are sent to controller. These 8 characters are sent to Arduino via serial communication.
Here, Processing software is used to communicate between Arduino and PHP Web Application .This processing software read the 8 characters at serial communication and matched with data stored in DB (MYSQL) by calling PHP Api. If it is matched then it is replied with valid user and attendance marked otherwise it is replied with not valid and no attendance marked (Reply from PHP API) on serial you can view the results (Processing output window).
    </p>
  </section>

  <div class="pimg1">
    <div class="ptext">
      <span class="border">
          <div  id="menu-nav">
    <div id="navigation-bar">
    <nav>
    <ul>
      <li style="float: left;"><a href="index.php"><i class="fa fa-home"></i><span>Home</span></a></li>
      <li style="float: right"><a href="register/userregister.php"><i class="fa fa-cogs"></i><span>Register</span></a></li>
        </ul>
        </nav>
</div>
    </div>
       Abhinay Raj
      </span>
    </div>
  </div>
    <aside class="subscribe">
			<i id="close" class="fa fa-times" aria-hidden="true" title="close"></i>
			<h2>Stay Up To Date!<br/><br/></h2>
			<p>Subscribe For Stay up to date and to get newletters goods sent straight to your inbox.</p>
<form  action="action/subscribe.php" method="POST">
<input  class="close" id="eclose" type="email" name="email" title="give correct mail id" required="required" maxlength="40" placeholder="Insert Email" autocomplete="on"/>
<button type="submit" name="subscribe">Subscribe</button>
</form>
</aside>

    
    
    
    <script type="text/javascript">
      // Closes the "Subscribe" popup
      var close = document.querySelector('#close','eclose');
      close.onclick = function() {
				this.parentNode.style.display = 'none';
      }
       
    </script>
    
    <script type="text/javascript" src="javascript/java.js"></script> 
    <?php

class rfid {
    public $link='';
    function __construct($allow, $id) {
        $this->connect();
        $this->storeInDB($allow, $id);
    }
    function connect() {
        $mysqli = mysqli_connect('sql313.888webhost.com','888we_21419398','abhinayraj9755','888we_21419398_abhinayraj') or die($mysqli->error);
        $this->link = mysqli_connect('sql313.888webhost.com','888we_21419398','abhinayraj9755','888we_21419398_abhinayraj') or die('Cannot connect to the DB');
        mysqli_select_db($mysqli, '888we_21419398_abhinayraj') or die('Cannot select the DB');
    }
    function storeInDB($allow, $id) {
        $mysqli = mysqli_connect('sql313.888webhost.com','888we_21419398','abhinayraj9755','888we_21419398_abhinayraj') or die($mysqli->error);
        $day = date("l");
        $time = date("H");
        if ($day == "Monday"){
                
            if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set java='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set linuxlab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "17")|| ($time == "18")){
                $query = "UPDATE attendance set dsinc='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set javalab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "03")|| ($time == "04")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "04")|| ($time == "05")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
            else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
                
        }
        }elseif($day == "Tuesday"){
            if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set dslab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set linuxlab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "11")|| ($time == "12")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "03")|| ($time == "04")){
                $query = "UPDATE attendance set java='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "04")|| ($time == "05")){
                $query = "UPDATE attendance set dsinc='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
        else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
                }
        }
                
                elseif($day == "Wednesday"){
                if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set java='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set dsinc='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "11")|| ($time == "12")){
                $query = "UPDATE attendance set dslab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "03")|| ($time == "04")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "04")|| ($time == "05")){
                $query = "UPDATE attendance set linuxlab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
            else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
                }
                }
            elseif($day == "Thursday"){
            if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set dsinc='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set linuxlab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "11")|| ($time == "12")){
                $query = "UPDATE attendance set linuxlab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set javalab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "03")|| ($time == "04")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "04")|| ($time == "05")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
            else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
}
            }
        elseif($day == "Friday"){
            if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "11")|| ($time == "12")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
        else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
        }
        }
        elseif($day == "Saturday"){
            if (($time == "09") || ($time == "10")){
                $query = "UPDATE attendance set java='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "10")|| ($time == "11")){
                $query = "UPDATE attendance set linux='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "11")|| ($time == "12")){
                $query = "UPDATE attendance set dsinc='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "02")|| ($time == "03")){
                $query = "UPDATE attendance set javalab='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "03")|| ($time == "04")){
                $query = "UPDATE attendance set os='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                elseif (($time == "04")|| ($time == "05")){
                $query = "UPDATE attendance set pe='".$allow."' WHERE rfid_no='$id' AND DATE(date)= CURDATE() ";
                }
                
        else{
                    $query = "INSERT INTO late ('allow' , 'rfid_no') VALUE ('$allow', '$id') ";
                
        }
        }
            
        
        $result = mysqli_query($mysqli, $query) or die('Errant query:  '.$query);
        if($result) {
            echo "Added successfully";
                }
            }
    
}

if($_GET['allow'] != '' and $_GET['id'] != '') {
    $rfid=new rfid($_GET['allow'],$_GET['id']);
}
?>
    
    
 <?php include("includes/layouts/footer.php"); ?>
